{"version":3,"sources":["webpack:///./templates/imagesTemplate.hbs","webpack:///./js/preloader.js","webpack:///./js/pNotify.js","webpack:///./js/apiService.js","webpack:///./js/renderingFetchedImagesAPI.js"],"names":["Handlebars","module","exports","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","stack1","program","noop","preloaderRef","document","querySelector","window","addEventListener","setTimeout","classList","add","stackForNotify","Stack","dir1","firstpos1","spacing1","push","maxOpen","modal","positioned","context","body","onNotify","text","type","title","delay","options","stack","mode","width","clientWidth","alert","ImagesQuery","this","searchQuery","page","fetchImages","searchParams","URLSearchParams","q","per_page","key","fetch","response","json","imageList","incrementPage","resetPage","newQuery","refs","searchForm","scrollHelper","imagesQuery","onDataReceived","images","allImagesCount","status","hits","length","totalHits","insertAdjacentHTML","imagesTemplate","querySelectorAll","forEach","item","onGalleryItemClick","message","fetchAndIncrementPage","then","error","console","log","clearGallery","innerHTML","query","focus","e","preventDefault","currentTarget","elements","value","trim","basicLightbox","dataset","largeImage","show","IntersectionObserver","entries","entry","isIntersecting","rootMargin","observe"],"mappings":"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","file":"main.9bad08c08026ed0c180e.js","sourcesContent":["var Handlebars = require(\"../../node_modules/handlebars/runtime.js\");\nfunction __default(obj) { return obj && (obj.__esModule ? obj[\"default\"] : obj); }\nmodule.exports = (Handlebars[\"default\"] || Handlebars).template({\"1\":function(container,depth0,helpers,partials,data) {\n    var helper, alias1=depth0 != null ? depth0 : (container.nullContext || {}), alias2=container.hooks.helperMissing, alias3=\"function\", alias4=container.escapeExpression, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return \"<li class=\\\"gallery-item\\\" data-large-image=\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"largeImageURL\") || (depth0 != null ? lookupProperty(depth0,\"largeImageURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"largeImageURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":2,\"column\":42},\"end\":{\"line\":2,\"column\":59}}}) : helper)))\n    + \">\\r\\n    <div class=\\\"photo-card\\\">\\r\\n        <img class=\\\"photo-card__img\\\" src=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"webformatURL\") || (depth0 != null ? lookupProperty(depth0,\"webformatURL\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"webformatURL\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":42},\"end\":{\"line\":4,\"column\":58}}}) : helper)))\n    + \"\\\" alt=\\\"\"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"id\") || (depth0 != null ? lookupProperty(depth0,\"id\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"id\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":4,\"column\":65},\"end\":{\"line\":4,\"column\":71}}}) : helper)))\n    + \"\\\" />\\r\\n\\r\\n        <div class=\\\"stats\\\">\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">thumb_up</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"likes\") || (depth0 != null ? lookupProperty(depth0,\"likes\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"likes\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":9,\"column\":16},\"end\":{\"line\":9,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">visibility</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"views\") || (depth0 != null ? lookupProperty(depth0,\"views\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"views\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":13,\"column\":16},\"end\":{\"line\":13,\"column\":25}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">comment</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"comments\") || (depth0 != null ? lookupProperty(depth0,\"comments\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"comments\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":17,\"column\":16},\"end\":{\"line\":17,\"column\":28}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n            <p class=\\\"stats-item\\\">\\r\\n                <i class=\\\"material-icons\\\">cloud_download</i>\\r\\n                \"\n    + alias4(((helper = (helper = lookupProperty(helpers,\"downloads\") || (depth0 != null ? lookupProperty(depth0,\"downloads\") : depth0)) != null ? helper : alias2),(typeof helper === alias3 ? helper.call(alias1,{\"name\":\"downloads\",\"hash\":{},\"data\":data,\"loc\":{\"start\":{\"line\":21,\"column\":16},\"end\":{\"line\":21,\"column\":29}}}) : helper)))\n    + \"\\r\\n            </p>\\r\\n        </div>\\r\\n    </div>\\r\\n</li>\\r\\n\";\n},\"compiler\":[8,\">= 4.3.0\"],\"main\":function(container,depth0,helpers,partials,data) {\n    var stack1, lookupProperty = container.lookupProperty || function(parent, propertyName) {\n        if (Object.prototype.hasOwnProperty.call(parent, propertyName)) {\n          return parent[propertyName];\n        }\n        return undefined\n    };\n\n  return ((stack1 = lookupProperty(helpers,\"each\").call(depth0 != null ? depth0 : (container.nullContext || {}),depth0,{\"name\":\"each\",\"hash\":{},\"fn\":container.program(1, data, 0),\"inverse\":container.noop,\"data\":data,\"loc\":{\"start\":{\"line\":1,\"column\":0},\"end\":{\"line\":26,\"column\":9}}})) != null ? stack1 : \"\");\n},\"useData\":true});","const preloaderRef = document.querySelector('#site-preloader');\r\n\r\nwindow.addEventListener('load', onLoadClosePreloader);\r\n\r\nfunction onLoadClosePreloader() {\r\n  setTimeout(() => {\r\n    preloaderRef.classList.add('loaded');\r\n    setTimeout(() => {\r\n      preloaderRef.classList.add('useful');\r\n    }, 500);\r\n  }, 500);\r\n}\r\n","import { alert, Stack } from '@pnotify/core';\r\n\r\nconst stackForNotify = new Stack({\r\n  dir1: 'up',\r\n  firstpos1: 0,\r\n  spacing1: 0,\r\n  push: 'bottom',\r\n  maxOpen: 1,\r\n  modal: false,\r\n  positioned: true,\r\n  context: document.body,\r\n});\r\n\r\nexport function onNotify(\r\n  text = 'Something went wrong',\r\n  type = 'error',\r\n  title = '',\r\n  delay = 1000,\r\n) {\r\n  const options = {\r\n    title,\r\n    text,\r\n    type,\r\n    stack: stackForNotify,\r\n    delay,\r\n    mode: 'light',\r\n    width: `${document.body.clientWidth}px`,\r\n  };\r\n  alert(options);\r\n}\r\n","const API_KEY = '19366071-7694c1ef5ecbe58de6b040ab5';\r\nconst BASE_URL =\r\n  'https://pixabay.com/api/?image_type=photo&orientation=horizontal&';\r\n\r\nexport class ImagesQuery {\r\n  constructor() {\r\n    this.searchQuery = '';\r\n    this.page = 1;\r\n  }\r\n\r\n  async fetchImages() {\r\n    const searchParams = new URLSearchParams({\r\n      q: this.searchQuery,\r\n      page: this.page,\r\n      per_page: 12,\r\n      key: API_KEY,\r\n    });\r\n    const response = await fetch(`${BASE_URL}${searchParams}`);\r\n    const imageList = await response.json();\r\n\r\n    return imageList;\r\n  }\r\n\r\n  incrementPage() {\r\n    this.page += 1;\r\n  }\r\n  resetPage() {\r\n    this.page = 1;\r\n  }\r\n\r\n  get query() {\r\n    return this.searchQuery;\r\n  }\r\n\r\n  set query(newQuery) {\r\n    this.searchQuery = newQuery;\r\n  }\r\n}\r\n","import './preloader';\r\nimport * as basicLightbox from 'basiclightbox';\r\nimport imagesTemplate from '../templates/imagesTemplate.hbs';\r\nimport { onNotify } from './pNotify.js';\r\n\r\nimport { ImagesQuery } from './apiService';\r\n\r\nconst refs = getRefs();\r\nconst imagesQuery = new ImagesQuery();\r\n\r\nfunction getRefs() {\r\n  return {\r\n    searchForm: document.querySelector('#search-form'),\r\n    imageList: document.querySelector('.gallery'),\r\n    scrollHelper: document.querySelector('#scroll-helper'),\r\n  };\r\n}\r\n\r\nrefs.searchForm.query.focus();\r\nrefs.searchForm.addEventListener('submit', onSearch);\r\n\r\nfunction onSearch(e) {\r\n  e.preventDefault();\r\n  imagesQuery.query = e.currentTarget.elements.query.value;\r\n\r\n  if (!imagesQuery.query.trim()) {\r\n    clearGallery();\r\n    onNotify(`Type something to find.`, 'error', 'Error');\r\n    return;\r\n  }\r\n\r\n  imagesQuery.resetPage();\r\n  clearGallery();\r\n  fetchAndIncrementPage();\r\n}\r\n\r\nfunction createImagesListMarkup(images, allImagesCount) {\r\n  refs.imageList.insertAdjacentHTML('beforeend', imagesTemplate(images));\r\n  document\r\n    .querySelectorAll('.gallery-item')\r\n    .forEach(item => item.addEventListener('click', onGalleryItemClick));\r\n  if (images.length === 0) {\r\n    onNotify(\r\n      `You have scrolled to the end of ${allImagesCount} items collection.`,\r\n      'notice',\r\n      'Info',\r\n    );\r\n  }\r\n}\r\n\r\nfunction onDataReceived(data) {\r\n  if (data.status === 404) {\r\n    onNotify(`${data.message}`, 'error', data.status);\r\n    return;\r\n  }\r\n  if (imagesQuery.page === 1 && data.hits.length === 0) {\r\n    onNotify('Enter correct request', 'error', `${data.totalHits} was found.`);\r\n    return;\r\n  }\r\n  createImagesListMarkup(data.hits, data.totalHits);\r\n}\r\n\r\nasync function fetchAndIncrementPage() {\r\n  try {\r\n    imagesQuery.fetchImages().then(data => {\r\n      onDataReceived(data);\r\n      imagesQuery.incrementPage();\r\n    });\r\n  } catch (error) {\r\n    console.log('Error in fetchAndIncrementPage function:', error);\r\n  }\r\n}\r\n\r\nfunction clearGallery() {\r\n  refs.imageList.innerHTML = '';\r\n}\r\n\r\nconst onEntry = entries => {\r\n  entries.forEach(entry => {\r\n    if (entry.isIntersecting && imagesQuery.query) {\r\n      fetchAndIncrementPage();\r\n    }\r\n  });\r\n};\r\n\r\nconst observer = new IntersectionObserver(onEntry, {\r\n  rootMargin: '50px',\r\n});\r\nobserver.observe(refs.scrollHelper);\r\n\r\nfunction onGalleryItemClick(e) {\r\n  const imageInstance = basicLightbox.create(`\r\n \t<img class=\"large-image\" src=\"${e.currentTarget.dataset.largeImage}\" alt=\"\"/>\r\n `);\r\n  imageInstance.show();\r\n}\r\n"],"sourceRoot":""}